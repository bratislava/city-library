query HomePage($locale: I18NLocaleCode!) {
  homePage(locale: $locale) {
    data {
      attributes {
        faqSection {
          id
          title
          redirectTo {
            data {
              ...PageWithBaseFieldsEntity
            }
          }
          faqs(pagination: { limit: 100 }) {
            id
            question
            answer
          }
          ctas(pagination: { limit: 100 }) {
            id
            title
            ctaRedirectTo {
              data {
                ...PageWithBaseFieldsEntity
              }
            }
          }
        }
        registrationInfoSection {
          id
          title
          description
          redirectTo {
            data {
              ...PageWithBaseFieldsEntity
            }
          }
          registrationBenefits {
            id
            benefit
          }
        }
        newsSection {
          id
          title
          redirectTo {
            data {
              ...PageWithBaseFieldsEntity
            }
          }
        }
        mapSection {
          id
          title
          branches {
            branch {
              data {
                ...BranchCardEntity
              }
            }
          }
        }
        localizations {
          data {
            attributes {
              locale
            }
          }
        }
        seo {
          ...Seo
        }
      }
    }
  }
  promotedNews: notices(
    locale: $locale
    sort: "publishedAt:desc"
    filters: { promoted: { eq: true } }
  ) {
    data {
      ...NoticeListingEntity
    }
  }
  promotedEvents: events(
    locale: $locale
    sort: "dateFrom:asc"
    filters: { promoted: { eq: true } }
  ) {
    data {
      ...EventCardEntity
    }
  }
  latestNotices: notices(
    locale: $locale
    pagination: { limit: 4, start: 0 }
    sort: "publishedAt:desc"
  ) {
    data {
      ...NoticeListingEntity
    }
  }
  bookTags(pagination: { limit: 100 }) {
    data {
      ...BookTagEntity
    }
  }
}

query LatestNews($locale: I18NLocaleCode!) {
  pages(
    filters: { layout: { eq: "news" } }
    locale: $locale
    pagination: { start: 0, limit: 4 }
    sort: "publishedAt:desc"
  ) {
    data {
      ...PageEntity
    }
  }
}

fragment MenuEntity on MenuEntity {
  id
  attributes {
    menuTitle
    menuSlug
    menuTotalColumns
    order
    menuSections {
      ...MenuSection
    }
    createdAt
    updatedAt
  }
}

fragment GeneralEntity on GeneralEntity {
  attributes {
    eventsPage {
      data {
        id
      }
    }
    newBooksPage {
      data {
        id
      }
    }
    privacyTermsAndConditionsPage {
      data {
        id
      }
    }
    openingHoursPage {
      data {
        id
      }
    }
    noticesPage {
      data {
        id
      }
    }
  }
}

fragment MenuSection on ComponentMenuSections {
  id
  sectionTitle
  sectionColumnSpan
  sectionPage {
    data {
      ...PageWithBaseFieldsEntity
    }
  }
  sectionLinks(pagination: { limit: 20 }) {
    id
    sectionLinkTitle
    sectionLinkPage {
      data {
        ...SectionLinkPage
      }
    }
  }
}

fragment BookTagEntity on BookTagEntity {
  id
  attributes {
    displayName
    slug
  }
}

fragment Documents on ComponentSectionsDocuments {
  title
  basicDocuments {
    data {
      ...BasicDocumentEntity
    }
  }
  moreLink {
    ...PageLink
  }
}

fragment Gallery on ComponentSectionsGallery {
  id
  Gallery {
    id
    Description
    Photo {
      data {
        ...UploadImageEntity
      }
    }
  }
}

fragment ChildrenListingSection on ComponentSectionsChildrenListing {
  id
  depth
}


fragment Sections on PageSectionsDynamicZone {
  __typename
  ... on ComponentSectionsSubListing {
    id
    title
    url
  }

  ... on ComponentSectionsFaq {
    id
    title
    questions {
      ...AccordionItem
    }
  }
  ... on ComponentSectionsFlatTextCenter {
    id
    content
  }
  ... on ComponentSectionsFlatText {
    id
    content
  }
  ... on ComponentSectionsSiteUsefullness {
    id
    title
    thankYouMessage
  }
  ... on ComponentSectionsForm {
    id
    type
  }
  ... on ComponentSectionsSubpages {
    id
    ...Subpages
  }
  ... on ComponentSectionsTable {
    ...Table
  }
  ... on ComponentSectionsAccordion {
    title
    flatText {
      ...FlatText
    }
    tableRows(pagination: { limit: 100 }) {
      ...TableRow
    }
    forms {
      category
      type
    }
  }
  ... on ComponentSectionsDivider {
    id
  }
  ... on ComponentSectionsColumnedText {
    title
    content
  }
  ... on ComponentSectionsExternalLinks {
    title
    externalLinks {
      ...ExternalLink
    }
    descriptions {
      ...FlatText
    }
  }
  ... on ComponentSectionsCta {
    title
    url
  }

  ... on ComponentSectionsVideo {
    id
    youtube_url
    media {
      data {
        attributes {
          url
        }
      }
    }
  }

  ... on ComponentSectionsDocuments {
    id
    ...Documents
  }

  ... on ComponentSectionsMap {
    id
    title
    branches {
      branch {
        data {
          ...BranchCardEntity
        }
      }
    }
  }

  ... on ComponentSectionsRental {
    id
    title
    text
    branches {
      branch {
        data {
          ...BranchCardEntity
        }
      }
      page {
        data {
          attributes {
            slug
          }
        }
      }
    }
  }

  ... on ComponentSectionsGallery {
    ...Gallery
  }

  ... on ComponentSectionsChildrenListing {
    ...ChildrenListingSection
  }
}

fragment FlatText on ComponentAccordionItemsFlatText {
  category
  content
}

fragment TableRow on ComponentAccordionItemsTableRow {
  accordionCategory
  tableCategory
  label
  value
  valueAlign
}

fragment Table on ComponentSectionsTable {
  primaryTitle
  secondaryTitle
  rows {
    label
    value
    valueAlign
  }
}

fragment Subpages on ComponentSectionsSubpages {
  title
  subpages {
    id
    title
    description
    url
    page {
      data {
        ...PageWithBaseFieldsEntity
      }
    }
  }
}

fragment ExternalLink on ComponentBlocksExternalLink {
  category
  title
  url
}

fragment AccordionItem on ComponentBlocksAccordionItem {
  id
  label
  content
}

fragment PageLink on ComponentBlocksPageLink {
  title
  url
  page {
    data {
      ...PageWithBaseFieldsEntity
    }
  }
}

fragment Pagination on Pagination {
  total
  page
  pageSize
  pageCount
}

fragment FooterEntity on FooterEntity {
  id
  attributes {
    footerColumns {
      id
      title
      footerLink {
        id
        redirectTo {
          data {
            ...PageWithBaseFieldsEntity
          }
        }
        title
        otherSite
      }
    }
    siteMapLink {
      data {
        ...PageWithBaseFieldsEntity
      }
    }
    privacyLink {
      data {
        ...PageWithBaseFieldsEntity
      }
    }
  }
}

query General($eventsFrom: DateTime!, $locale: I18NLocaleCode!) {
  menus(locale: $locale, sort: ["order:asc"]) {
    data {
      ...MenuEntity
    }
  }
  upcomingEvents: events(
    locale: $locale
    sort: "dateFrom:asc"
    pagination: { start: 0, limit: 4 }
    filters: { dateTo: { gte: $eventsFrom } }
  ) {
    data {
      ...EventCardEntity
    }
  }
  footer(locale: $locale) {
    data {
      ...FooterEntity
    }
  }
  general(locale: $locale) {
    data {
      ...GeneralEntity
    }
  }
}
