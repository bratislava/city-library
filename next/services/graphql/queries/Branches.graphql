fragment BranchPlaceEntity on BranchEntity {
  id
  attributes {
    title
    address
    phone
    email
    openingHours {
      days {
        label
        time
      }
    }
  }
}

fragment BranchCardEntity on BranchEntity {
  id
  attributes {
    title
    address
    slug
    latitude
    longitude
    listingImage {
      data {
        ...ImageEntity
      }
    }
    subBranches {
      data {
        id
        ...BranchPlaceEntity
      }
    }
  }
}

fragment BranchEntity on BranchEntity {
  ...BranchCardEntity
  attributes {
    medias {
      data {
        id
        attributes {
          name
          url
          caption
          alternativeText
        }
      }
    }
    body
    publicTransportInfo
    barrierFreeInfo
    barrierFreeState
    phone
    email
    openingHours {
      days {
        label
        time
      }
    }
    servicePages {
      data {
        id
        attributes {
          title
          slug
        }
      }
    }
    locale
    localizations {
      data {
        id
        attributes {
          title
          slug
          locale
        }
      }
    }
  }
}

query BranchStaticPaths($locale: I18NLocaleCode!) {
  branches(locale: $locale, pagination: { limit: -1 }) {
    data {
      attributes {
        slug
        locale
      }
    }
  }
}


query BranchBySlug($slug: String!, $locale: I18NLocaleCode!) {
  branches(locale: $locale, filters: { slug: { eq: $slug } }) {
    data {
      ...BranchEntity
    }
  }
}
