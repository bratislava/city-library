fragment PageEntity on PageEntity {
  id
  attributes {
    slug
    title
    createdAt
    updatedAt
    publishedAt
    listingImage {
      data {
        attributes {
          name
          width
          height
          url
          createdAt
          hash
          mime
          provider
          size
          alternativeText
          updatedAt
        }
      }
    }
    layout
    perex
    sections {
      ...Sections
    }

    locale
    localizations {
      data {
        ...PageLocalizationEntity
      }
    }
    seo {
      ...Seo
    }
  }
}

fragment SectionLinkPage on PageEntity {
  id
  attributes {
    title
  }
}

fragment SectionLinkBranch on BranchEntity {
  id
  attributes {
    slug
    title
  }
}

fragment PageWithBaseFieldsEntity on PageEntity {
  id
  attributes {
    title
    slug
    newSlug
    createdAt
    updatedAt
  }
}

fragment PageLocalizationEntity on PageEntity {
  id
  attributes {
    slug
    locale
  }
}

# strapi returns just the default locale if no locale is provided
# easiest way to get all static paths is to ask for all locales sequentially
query PagesStaticPaths($locale: I18NLocaleCode) {
  pages(locale: $locale) {
    data {
      id
      attributes {
        locale
      }
    }
  }
}

query PageById($id: ID!, $locale: I18NLocaleCode!) {
  pages(filters: { id: { eq: $id } }, locale: $locale) {
    data {
      ...PageEntity
    }
  }
}
