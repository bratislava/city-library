query BasicDocumentBySlug($slug: String!) {
  basicDocuments(filters: { slug: { eq: $slug } }) {
    data {
      ...BasicDocument
    }
  }
}

query AllBasicDocuments($limit: Int, $offset: Int, $sort: String, $categoryId: ID, $query: String) {
  basicDocuments(
    sort: [$sort]
    pagination: { limit: $limit, start: $offset }
    filters: { title: { contains: $query }, file_category: { id: { eq: $categoryId } } }
  ) {
    data {
      ...BasicDocument
    }
  }
}

query BasicDocumentsCount {
  basicDocuments {
    meta {
      pagination {
        total
      }
    }
  }
}

query FileCategories {
  fileCategories {
    data {
      id
      attributes {
        name
        slug
      }
    }
  }
}

query DocumentCategoryBySlug($slug: String!) {
  fileCategories(filters: { slug: { eq: $slug } }) {
    data {
      ...DocumentCategory
    }
  }
}

fragment DocumentCategory on FileCategoryEntity {
  id
  attributes {
    name
    slug
  }
}

fragment BasicDocumentFile on UploadFileEntity {
  id
  attributes {
    url
    name
    ext
  }
}

fragment BasicDocument on BasicDocumentEntity {
  id
  attributes {
    slug
    title
    description
    date_added
    author
    link
    file_category {
      data {
        id
        attributes {
          name
          slug
        }
      }
    }
    metadata {
      ...Metadata
    }
    attachment {
      data {
        ...BasicDocumentFile
      }
    }
  }
}

fragment Metadata on BasicDocumentMetadataDynamicZone {
  __typename

  ... on ComponentMetadataFaktury {
    id
    name
    date
    attachment {
      data {
        ...BasicDocumentFile
      }
    }
  }
  ... on ComponentMetadataMetadata {
    id
    provider
    year
    grant_name
    grant_number
    amount
    description
  }
  ... on ComponentMetadataZmluvy {
    id
    date
    number
    amount
    supplier
    subject
  }
  ... on ComponentMetadataObchodnaVerejnaSutaz {
    id
    subject
    description
    number
    date_added
    amount
    attachment {
      data {
        ...BasicDocumentFile
      }
    }
  }
  ... on ComponentMetadataObjednavky {
    id
    title
    date_period
    date_added
    attachment {
      data {
        ...BasicDocumentFile
      }
    }
  }
  ... on ComponentMetadataVerejneObstaravanie {
    id
    subject
    description
    number
    date_added
    amount
    attachment {
      data {
        ...BasicDocumentFile
      }
    }
  }
}
