fragment BlogPostEntity on BlogPostEntity {
  id
  attributes {
    slug
    title
    createdAt
    coverMedia {
      data {
        attributes {
          url
          mime
          alternativeText
        }
      }
    }
    sections {
      ...Sections
    }
  }
}

fragment BlogPostWithParentPageEntity on BlogPostEntity {
  id
  attributes {
    slug
    title
    createdAt
    coverMedia {
      data {
        attributes {
          url
          mime
          alternativeText
        }
      }
    }
    sections {
      ...Sections
    }
    parentPage {
      data {
        ...ParentPage
      }
    }
  }
}

query BlogPostStaticPaths {
  blogPosts {
    data {
      id
      attributes {
        slug
      }
    }
  }
}

query BlogPostBySlug($slug: String!) {
  blogPosts(filters: { slug: { eq: $slug } }) {
    data {
      ...BlogPostWithParentPageEntity
    }
  }
}

query BlogPosts($limit: Int, $start: Int, $sort: String = "publishedAt:desc") {
  blogPosts(pagination: { limit: $limit, start: $start }, sort: [$sort]) {
    data {
      ...BlogPostEntity
    }
  }
}

query BlogPostsCount {
  blogPosts {
    meta {
      pagination {
        total
      }
    }
  }
}
