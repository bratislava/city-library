query BlogPostStaticPaths {
  blogPosts {
    data {
      id
      attributes {
        slug
      }
    }
  }
}

query BlogPostBySlug($slug: String!) {
  blogPosts(filters: {slug: {eq: $slug}}) {
    ...BlogPostWithParentPage
  }
}

fragment BlogPost on BlogPost {
  slug
  title
  createdAt
  coverMedia {
    data {
      attributes {
        url
        mime
        alternativeText
      }
    }
  }
  # sections {
  #   ...Sections
  # }
}

fragment BlogPostWithParentPage on BlogPostEntityResponseCollection {
  data {
    id
    attributes {
      ...BlogPost
      parentPage {
        ...ParentPage
      }
    }
  }
}

fragment ParentPage on PageEntityResponse {
  data {
    id
    attributes {
      title
      slug
      layout
      pageCategory {
        data {
          attributes {
            ...PageCategory
          }
        }
      }
    }
  }
}

fragment PageCategory on Category {
    ...Category
    subCategories {
      data {
        attributes {
          ...Category
        }
        id
      }
    }

    parentCategory {
      data {
        attributes {
          ...Category
       
          parentCategory {
            data {
              attributes {
                ...Category
              }
              id
            }
          }
        }
        id
      }
    }
}

fragment Category on Category {
  title
  priority
  pages {
    ...PageLink
  }
  pageLink {
    ...PageLink
  }
  createdAt
  updatedAt
}

fragment PageLink on ComponentBlocksPageLink {
  id
  title
  url
  page {
    ...BasePageFields
  }
}

fragment BasePageFields on PageEntityResponse {
  data {
    id
    attributes {
      title
      slug
      createdAt
      updatedAt
    }
  }
}

query FetchBlogPosts($id: ID, $limit: Int, $offset: Int) {
  blogPosts(filters: {id: {eq: $id}}, pagination: {limit: $limit, start: $offset}){
    data {
      id
      attributes {
        ...BlogPost
      }
    }
  }
}

query BlogPostsCount {
  blogPosts {
    meta {
      pagination {
        total
      }
    }
  }
}
