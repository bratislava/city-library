fragment BranchPlaceEntity on BranchEntity {
  id
  attributes {
    title
    navigateToLink
    address
    phone
    email
    openingHours {
      days {
        label
        time
      }
    }
  }
}

fragment BranchPlaceNestedEntity on BranchEntity {
  ...BranchPlaceEntity
  attributes {
    parentBranch {
      data {
        ...BranchPlaceEntity
      }
    }
  }
}

fragment BranchCardEntity on BranchEntity {
  id
  attributes {
    title
    address
    slug
    latitude
    longitude
    subBranches {
      data {
        id
        ...BranchPlaceEntity
      }
    }
  }
}

fragment BranchEntity on BranchEntity {
  ...BranchCardEntity
  attributes {
    navigateToLink
    parentBranch {
      data {
        ...BranchPlaceEntity
      }
    }
    medias {
      data {
        id
        attributes {
          name
          url
          caption
          alternativeText
        }
      }
    }
    body
    publicTransportInfo
    barrierFreeInfo
    barrierFreeState
    phone
    email
    openingHours {
      days {
        label
        time
      }
    }
    servicePages {
      data {
        id
        attributes {
          title
          slug
        }
      }
    }
    locale
    localizations {
      data {
        id
        attributes {
          title
          slug
          locale
        }
      }
    }
  }
}

query BranchStaticPaths($locale: I18NLocaleCode!) {
  branches(locale: $locale, pagination: { limit: -1 }) {
    data {
      attributes {
        slug
        locale
      }
    }
  }
}


query BranchBySlug($slug: String!, $locale: I18NLocaleCode!) {
  branches(locale: $locale, filters: { slug: { eq: $slug } }) {
    data {
      ...BranchEntity
    }
  }
  menus(locale: $locale, sort: ["order:asc"]) {
    data {
      ...Menu
    }
  }
  footer(locale: $locale) {
    data {
      id
      attributes {
        footerColumns {
          id
          title
          footerLink {
            id
            redirectTo {
              data {
                ...PageWithBaseFieldsEntity
              }
            }
            title
            otherSite
          }
        }
        siteMapLink {
          data {
            ...PageWithBaseFieldsEntity
          }
        }
        privacyLink {
          data {
            ...PageWithBaseFieldsEntity
          }
        }
      }
    }
  }
}
